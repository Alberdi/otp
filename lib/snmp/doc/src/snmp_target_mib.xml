<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE erlref SYSTEM "erlref.dtd">

<erlref>
  <header>
    <copyright>
      <year>1998</year><year>2024</year>
      <holder>Ericsson AB. All Rights Reserved.</holder>
    </copyright>
    <legalnotice>
      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at
 
          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
    
    </legalnotice>

    <title>snmp_target_mib</title>
    <prepared></prepared>
    <responsible></responsible>
    <docno></docno>
    <approved></approved>
    <checked></checked>
    <date></date>
    <rev></rev>
    <file>snmp_target_mib.xml</file>
  </header>
  <module since="">snmp_target_mib</module>
  <modulesummary>Instrumentation Functions for SNMP-TARGET-MIB</modulesummary>
  <description>
    <p>The module <c>snmp_target_mib</c> implements the instrumentation
      functions for the SNMP-TARGET-MIB, 
      and functions for configuring the database. </p>
    <p>The configuration files are described in the SNMP User's Manual.</p>
    <p>Legacy API functions <c>add_addr/10</c> that does not specify
      transport domain, and <c>add_addr/11</c> that has got separate
      <c>IpAddr</c> and <c>PortNumber</c> arguments still work as before
      for backwards compatibility reasons.</p>

    <marker id="types"></marker>
  </description>

  <datatypes>
    <datatype>
      <name name="name"/>
      <desc>
	<note>
	  <p>"The locally arbitrary, but unique identifier associated
	  with this snmpTargetAddrEntry."</p>
	</note>
	<p>
	  <c><![CDATA[SnmpAdminString (SIZE(1..32))]]></c>
	</p>
      </desc>
    </datatype>

    <datatype>
      <name name="tag_value"/>
      <desc>
	<note>
	  <p>"An octet string containing a tag value.
	  Tag values are preferably in human-readable form."</p>
	</note>
	<p>
	  <c><![CDATA[OCTET STRING (SIZE (0..255))]]></c>
	</p>
      </desc>
    </datatype>

    <datatype>
      <name name="tag_list"/>
      <desc>
	<note>
	  <p>"An octet string containing a list of tag values.
	  Tag values are preferably in human-readable form."</p>
	  <p>"To facilitate internationalization, this information
	  is represented using the ISO/IEC IS 10646-1 character
	  set, encoded as an octet string using the UTF-8
	  character encoding scheme described in RFC 2279."</p>
	</note>
	<p>
	  <c><![CDATA[OCTET STRING (SIZE (0..255))]]></c>
	</p>
      </desc>
    </datatype>

    <datatype>
      <name name="params"/>
      <desc>
	<note>
	  <p>"The value of this object identifies an entry in the
	  snmpTargetParamsTable."</p>
	</note>
	<p>
	  <c><![CDATA[SnmpAdminString (SIZE(1..32))]]></c>
	</p>
      </desc>
    </datatype>

    <datatype>
      <name name="tmask"/>
      <desc>
	<note>
	  <p>"The mask value associated with an entry in the
	  snmpTargetAddrTable. The value of this object must
	  have the same length as the corresponding instance of
	  snmpTargetAddrTAddress, or must have length 0."</p>
	</note>
	<p>
	  <c><![CDATA[OCTET STRING (SIZE (0..255))]]></c>
	</p>
      </desc>
    </datatype>

    <datatype>
      <name name="max_message_size"/>
      <desc>
	<note>
	  <p>"The maximum message size value associated with an entry
	  in the snmpTargetAddrTable."</p>
	</note>
	<p>
	  <c><![CDATA[Integer32 (484..65535)]]></c>
	</p>
      </desc>
    </datatype>

  </datatypes>

  
  <section>
    <title>DATA TYPES</title>
    <p>See the <seeerl marker="snmpa_conf#types">
    data types in <c>snmpa_conf</c></seeerl>.</p>

    <marker id="configure"></marker>
  </section>

  <funcs>
    <func>
      <name name="configure" arity="1" clause_i="1" since=""/>
      <fsummary>Configure the SNMP-TARGET-MIB</fsummary>
      <desc>
	<p>This function is called from the supervisor at system
	start-up. </p>
        <p>Inserts all data in the configuration files into the
	database and destroys all old rows with StorageType
	<c>volatile</c>.  The rows created from the configuration file
	will have StorageType <c>nonVolatile</c>. </p>
        <p>All <c>snmp</c> counters are set to zero. </p>
        <p>If an error is found in the configuration file, it is
	reported using the function <c>config_err/2</c> of the error
	report module, and the function fails with the reason 
	<c>configuration_error</c>. </p>
        <p><c>ConfDir</c> is a string which points to the directory
	where the configuration files are found. </p>
        <p>The configuration files read are: <c>target_addr.conf</c>
	and <c>target_params.conf</c>. </p>

	<marker id="reconfigure"></marker>
      </desc>
    </func>

    <func>
      <name name="reconfigure" arity="1" clause_i="1" since=""/>
      <fsummary>Configure the SNMP-TARGET-MIB</fsummary>
      <desc>
        <p>Inserts all data in the configuration files into the
	database and destroys all old data, including the rows with
	StorageType <c>nonVolatile</c>.  The rows created from the
	configuration file will have StorageType <c>nonVolatile</c>. </p>
        <p>Thus, the data in the SNMP-TARGET-MIB, after this
	function has been called, is the data from the configuration
	files. </p>
        <p>All <c>snmp</c> counters are set to zero.</p>
        <p>If an error is found in the configuration file, it is
	reported using the function <c>config_err/2</c> of the ,
	and the function fails with the reason 
	<c>configuration_error</c>.</p>
        <p><c>ConfDir</c> is a string which points to the directory
	where the configuration files are found. </p>
        <p>The configuration files read are: <c>target_addr.conf</c>
	and <c>target_params.conf</c>. </p>

	<marker id="set_target_engine_id"></marker>
      </desc>
    </func>

    <func>
      <name name="set_target_engine_id" arity="2" clause_i="1" since=""/>
      <fsummary>Set the engine id for a targetAddr row.</fsummary>
      <desc>
        <p>Changes the engine id for a target in the 
	<c>snmpTargetAddrTable</c>.
	If notifications are sent as Inform requests to a target, its
	engine id must be set. </p>

	<marker id="add_addr"></marker>
      </desc>
    </func>

    <func>
      <name name="add_addr" arity="10" clause_i="1" since=""/>
      <fsummary>Add one target address definition</fsummary>
      <desc>
        <p>Adds a target address definition to the agent config. 
	Equivalent to one line in the <c>target_addr.conf</c> file.</p>

        <marker id="delete_addr"></marker>
      </desc>
    </func>

    <func>
      <name name="delete_addr" arity="1" clause_i="1" since=""/>
      <fsummary>Delete one target address definition</fsummary>
      <desc>
        <p>Delete a target address definition from the agent config.</p>

        <marker id="add_params"></marker>
      </desc>
    </func>

    <func>
      <name name="add_params" arity="5" clause_i="1" since=""/>
      <fsummary>Add one target parameter definition</fsummary>
      <desc>
        <p>Adds a target parameter definition to the agent config. 
	Equivalent to one line in the <c>target_params.conf</c> file.</p>

        <marker id="delete_params"></marker>
      </desc>
    </func>

    <func>
      <name name="delete_params" arity="1" clause_i="1" since=""/>
      <fsummary>Delete one target parameter definition</fsummary>
      <desc>
        <p>Delete a target parameter definition from the agent config.</p>
      </desc>
    </func>
  </funcs>
  
</erlref>

